<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Cr√©dito</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px;
        }

        .simulator-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 20px;
            max-width: 100%;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .product-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            padding: 10px 14px;
            margin-bottom: 16px;
            color: white;
            display: none;
        }

        .product-badge.show {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        .product-badge-title {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            opacity: 0.9;
            margin-bottom: 4px;
        }

        .product-badge-name {
            font-size: 15px;
            font-weight: 700;
            margin-bottom: 6px;
        }

        .product-badge-details {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            font-size: 11px;
        }

        .product-badge-detail {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .product-badge-detail-label {
            opacity: 0.8;
        }

        .product-badge-detail-value {
            font-weight: 700;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header h1 {
            color: #1a202c;
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .header p {
            color: #718096;
            font-size: 12px;
        }

        /* GRID DE 2 COLUMNAS */
        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            align-items: start;
        }

        @media (max-width: 700px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
        }

        .form-group {
            margin-bottom: 18px;
        }

        .form-group label {
            display: block;
            color: #2d3748;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .label-value {
            color: #667eea;
            font-size: 13px;
            font-weight: 700;
        }

        .slider-container {
            position: relative;
            padding: 10px 0;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: linear-gradient(to right, #667eea 0%, #667eea var(--value), #e2e8f0 var(--value), #e2e8f0 100%);
            outline: none;
            -webkit-appearance: none;
            appearance: none;
            transition: all 0.3s ease;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
            transition: all 0.2s ease;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.6);
        }

        input[type="range"]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: none;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
            transition: all 0.2s ease;
        }

        input[type="range"]::-moz-range-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.6);
        }

        .select-wrapper {
            position: relative;
        }

        select {
            width: 100%;
            padding: 10px 32px 10px 12px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 12px;
            font-family: 'Inter', sans-serif;
            color: #2d3748;
            background-color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            -webkit-appearance: none;
            appearance: none;
        }

        select:hover {
            border-color: #667eea;
        }

        select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .select-wrapper::after {
            content: '‚ñº';
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #667eea;
            pointer-events: none;
            font-size: 10px;
        }

        /* TABLA DE RESULTADOS */
        .results-panel {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            padding: 18px;
            color: white;
            position: sticky;
            top: 0;
        }

        .results-panel h2 {
            font-size: 14px;
            margin-bottom: 14px;
            font-weight: 600;
            text-align: center;
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
        }

        .results-table tr {
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .results-table tr:last-child {
            border-bottom: none;
        }

        .results-table td {
            padding: 10px 0;
        }

        .results-table td:first-child {
            opacity: 0.9;
        }

        .results-table td:last-child {
            text-align: right;
            font-weight: 700;
            font-size: 14px;
        }

        .total-row {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 8px;
        }

        .total-row td {
            padding: 12px 10px !important;
        }

        .total-row td:last-child {
            font-size: 20px !important;
        }

        .btn-primary {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
            margin-top: 16px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }
    </style>
</head>

<body>
    <div class="simulator-container">
        <!-- Product Badge -->
        <div id="productBadge" class="product-badge">
            <div class="product-badge-title">Simulando</div>
            <div class="product-badge-name" id="productName">Cr√©dito Personal Multiplica Expr√©s</div>
            <div class="product-badge-details">
                <div class="product-badge-detail">
                    <span class="product-badge-detail-label">Tasa:</span>
                    <span class="product-badge-detail-value" id="productRate">18.9% anual</span>
                </div>
                <div class="product-badge-detail">
                    <span class="product-badge-detail-label">Tipo:</span>
                    <span class="product-badge-detail-value" id="productType">Personal</span>
                </div>
            </div>
        </div>

        <div class="header">
            <h1>üí∞ Simulador de Cr√©dito</h1>
            <p>Calcula tu pr√©stamo ideal en segundos</p>
        </div>

        <!-- GRID DE 2 COLUMNAS -->
        <div class="content-grid">
            <!-- COLUMNA IZQUIERDA: INPUTS -->
            <div>
                <form id="creditForm">
                    <div class="form-group">
                        <label>
                            <span>Monto del pr√©stamo</span>
                            <span class="label-value" id="amountDisplay">$100,000</span>
                        </label>
                        <div class="slider-container">
                            <input type="range" id="amount" min="10000" max="500000" step="5000" value="100000"
                                style="--value: 18%">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>
                            <span>Plazo</span>
                            <span class="label-value" id="termDisplay">24 meses</span>
                        </label>
                        <div class="slider-container">
                            <input type="range" id="term" min="6" max="60" step="6" value="24" style="--value: 33%">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>
                            <span>Tasa de inter√©s anual</span>
                            <span class="label-value" id="rateDisplay">12%</span>
                        </label>
                        <div class="slider-container">
                            <input type="range" id="rate" min="5" max="30" step="0.5" value="12" style="--value: 28%">
                        </div>
                    </div>
                </form>
            </div>

            <!-- COLUMNA DERECHA: RESULTADOS EN TABLA -->
            <div>
                <div class="results-panel">
                    <h2>üìä Resumen de tu cr√©dito</h2>

                    <table class="results-table">
                        <tr>
                            <td>Pago mensual</td>
                            <td id="monthlyPayment">$4,707</td>
                        </tr>
                        <tr>
                            <td>Total de intereses</td>
                            <td id="totalInterest">$12,968</td>
                        </tr>
                        <tr class="total-row">
                            <td>Total a pagar</td>
                            <td id="totalPayment">$112,968</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <!-- TIPO DE CR√âDITO Y BOT√ìN (ANCHO COMPLETO) -->
        <div class="form-group" style="margin-top: 24px;">
            <label>Tipo de cr√©dito</label>
            <div class="select-wrapper">
                <select id="creditType">
                    <option value="personal">Cr√©dito Personal</option>
                    <option value="auto">Cr√©dito Automotriz</option>
                    <option value="hipotecario">Cr√©dito Hipotecario</option>
                    <option value="empresarial">Cr√©dito Empresarial</option>
                </select>
            </div>
        </div>

        <button type="button" class="btn-primary" onclick="applyForCredit()">
            Solicitar Cr√©dito
        </button>
    </div>

    <script>
        // Elementos del DOM
        const amountSlider = document.getElementById('amount');
        const termSlider = document.getElementById('term');
        const rateSlider = document.getElementById('rate');
        const creditTypeSelect = document.getElementById('creditType');
        const amountDisplay = document.getElementById('amountDisplay');
        const termDisplay = document.getElementById('termDisplay');
        const rateDisplay = document.getElementById('rateDisplay');
        const monthlyPaymentEl = document.getElementById('monthlyPayment');
        const totalInterestEl = document.getElementById('totalInterest');
        const totalPaymentEl = document.getElementById('totalPayment');
        const productBadge = document.getElementById('productBadge');
        const productName = document.getElementById('productName');
        const productRate = document.getElementById('productRate');
        const productType = document.getElementById('productType');

        // Cat√°logo de productos de cr√©dito
        const creditProducts = {
            'personal': {
                name: 'Cr√©dito Personal Multiplica Expr√©s',
                rate: 18.9,
                type: 'Personal',
                minAmount: 10000,
                maxAmount: 500000,
                defaultTerm: 24
            },
            'auto': {
                name: 'Cr√©dito Automotriz Multiplica',
                rate: 14.5,
                type: 'Automotriz',
                minAmount: 50000,
                maxAmount: 1000000,
                defaultTerm: 48
            },
            'hipotecario': {
                name: 'Cr√©dito Hipotecario Multiplica',
                rate: 10.5,
                type: 'Hipotecario',
                minAmount: 300000,
                maxAmount: 5000000,
                defaultTerm: 240
            },
            'empresarial': {
                name: 'Cr√©dito Empresarial Multiplica',
                rate: 16.0,
                type: 'Empresarial',
                minAmount: 50000,
                maxAmount: 2000000,
                defaultTerm: 36
            }
        };

        // Funci√≥n para obtener par√°metros de URL
        function getURLParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                amount: params.get('amount'),
                term: params.get('term'),
                rate: params.get('rate'),
                type: params.get('type'),
                productName: params.get('productName')
            };
        }

        // Funci√≥n para actualizar el badge del producto
        function updateProductBadge(type) {
            const product = creditProducts[type] || creditProducts['personal'];
            productName.textContent = product.name;
            productRate.textContent = `${product.rate}% anual`;
            productType.textContent = product.type;
            productBadge.classList.add('show');
        }

        // Funci√≥n para formatear moneda
        function formatCurrency(amount) {
            return new Intl.NumberFormat('es-MX', {
                style: 'currency',
                currency: 'MXN',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        // Funci√≥n para actualizar el gradiente del slider
        function updateSliderGradient(slider) {
            const min = parseFloat(slider.min);
            const max = parseFloat(slider.max);
            const value = parseFloat(slider.value);
            const percentage = ((value - min) / (max - min)) * 100;
            slider.style.setProperty('--value', percentage + '%');
        }

        // Funci√≥n para calcular el pago mensual
        function calculatePayment() {
            const principal = parseFloat(amountSlider.value);
            const interestRate = parseFloat(rateSlider.value) / 100 / 12;
            const numberOfPayments = parseFloat(termSlider.value);

            // F√≥rmula del pago mensual
            const monthlyPayment = principal *
                (interestRate * Math.pow(1 + interestRate, numberOfPayments)) /
                (Math.pow(1 + interestRate, numberOfPayments) - 1);

            const totalPayment = monthlyPayment * numberOfPayments;
            const totalInterest = totalPayment - principal;

            // Actualizar la UI
            monthlyPaymentEl.textContent = formatCurrency(monthlyPayment);
            totalInterestEl.textContent = formatCurrency(totalInterest);
            totalPaymentEl.textContent = formatCurrency(totalPayment);
        }

        // Event listeners para los sliders
        amountSlider.addEventListener('input', (e) => {
            amountDisplay.textContent = formatCurrency(e.target.value);
            updateSliderGradient(e.target);
            calculatePayment();
        });

        termSlider.addEventListener('input', (e) => {
            termDisplay.textContent = `${e.target.value} meses`;
            updateSliderGradient(e.target);
            calculatePayment();
        });

        rateSlider.addEventListener('input', (e) => {
            rateDisplay.textContent = `${e.target.value}%`;
            updateSliderGradient(e.target);
            calculatePayment();
        });

        // Event listener para cambio de tipo de cr√©dito
        creditTypeSelect.addEventListener('change', (e) => {
            const creditType = e.target.value;
            const product = creditProducts[creditType];

            // Actualizar tasa seg√∫n el producto
            rateSlider.value = product.rate;
            rateDisplay.textContent = `${product.rate}%`;
            updateSliderGradient(rateSlider);

            // Actualizar badge
            updateProductBadge(creditType);

            calculatePayment();
        });

        // Funci√≥n para solicitar cr√©dito
        function applyForCredit() {
            const creditType = creditTypeSelect.value;
            const amount = amountSlider.value;
            const term = termSlider.value;
            const product = creditProducts[creditType];

            alert(`¬°Solicitud iniciada!\n\nProducto: ${product.name}\nMonto: ${formatCurrency(amount)}\nPlazo: ${term} meses\nTasa: ${product.rate}% anual\n\nUn asesor se comunicar√° contigo pronto.`);
        }

        // Inicializar con par√°metros de URL si existen
        function initialize() {
            const urlParams = getURLParams();

            // Pre-llenar con par√°metros de URL
            if (urlParams.amount) {
                const amount = parseInt(urlParams.amount);
                if (amount >= 10000 && amount <= 500000) {
                    amountSlider.value = amount;
                    amountDisplay.textContent = formatCurrency(amount);
                }
            }

            if (urlParams.term) {
                const term = parseInt(urlParams.term);
                // Convertir a√±os a meses si necesario
                const termMonths = term > 60 ? term : (term <= 10 ? term * 12 : term);
                if (termMonths >= 6 && termMonths <= 60) {
                    termSlider.value = termMonths;
                    termDisplay.textContent = `${termMonths} meses`;
                }
            }

            if (urlParams.rate) {
                const rate = parseFloat(urlParams.rate);
                if (rate >= 5 && rate <= 30) {
                    rateSlider.value = rate;
                    rateDisplay.textContent = `${rate}%`;
                }
            }

            if (urlParams.type) {
                const type = urlParams.type.toLowerCase();
                if (creditProducts[type]) {
                    creditTypeSelect.value = type;
                    const product = creditProducts[type];
                    rateSlider.value = product.rate;
                    rateDisplay.textContent = `${product.rate}%`;
                }
            }

            // Mostrar badge si hay par√°metros
            if (urlParams.type || urlParams.productName) {
                const creditType = urlParams.type || 'personal';
                updateProductBadge(creditType);

                // Sobrescribir nombre del producto si viene en URL
                if (urlParams.productName) {
                    productName.textContent = decodeURIComponent(urlParams.productName);
                }
            }

            // Actualizar gradientes
            updateSliderGradient(amountSlider);
            updateSliderGradient(termSlider);
            updateSliderGradient(rateSlider);

            // Calcular pago inicial
            calculatePayment();
        }

        // Ejecutar inicializaci√≥n cuando el DOM est√© listo
        initialize();
    </script>
</body>

</html>